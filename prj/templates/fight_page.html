{% extends 'app.html' %}

{% block content %}

<div class="fight_page container col-10 d-flex flex-column pt-5 pb-5 justify-content-center align-items-center">

    <div class="col-12 d-flex justify-content-center align-items-center">
        <div class="col-6 d-flex flex-column justify-content-center align-items-center">
            <div class="d-flex flex-column align-items-center mb-3 col-12">
                <h3 class="d-flex justify-content-center">
                    {{ pokemon.name }} (you)
                </h3>
                <div class="d-flex col-3 justify-content-between">
                    <div>hp: {{ pokemon.hp }}</div>
                    <div>attack: {{ pokemon.attack }}</div>
                </div>
            </div>
            
            <div class="d-flex justify-content-center {% if winner and winner.name != pokemon.name %} dead {% endif %}">
                <img src="{{ pokemon.image }}" alt="{{ pokemon.name }} image" height="150"/>
            </div>
    
            <div class="d-flex col-4 mt-3 justify-content-center fs-4 fw-bolder">
                <div>hp: {{ session['select_pokemon_hp'] }}</div>
            </div>
    
            {% if not global_win %}
            <div class="mt-3 d-flex col-4">
                {% if session['entered_number'] %}
                <div class="d-flex mt-3 justify-content-center fs-4 border border-secondary rounded">
                    <div class="d-flex justify-content-center align-items-center p-1">
                        Your number:&nbsp;
                        <span class="fw-bolder">{{ session['entered_number'] }}</span>
                    </div>
                </div>
                {% else %}
                <form class="d-flex mt-3 col-12" action="{{ url_for('fight') }}" method="post" enctype="multipart/form-data">
                    <div class="input-group">
                        <label>Enter a number from&nbsp;1&nbsp;to&nbsp;10:</label>
                        <input class="col-6 form-control" name="entered_number" type="number" min="1" max="10" step="1" required />
                        <button class="col-6 btn btn-outline-secondary" type="submit">Enter</button>
                    </div>
                </form>
                {% endif %}
            </div>
            {% endif %}
        </div>
    
        <h1>VS</h1>
    
        <div class="col-6 d-flex flex-column justify-content-center align-items-center">
            <div class="d-flex flex-column align-items-center mb-3 col-12">
                <h3 class="d-flex justify-content-center">
                    {{ vs_pokemon.name }}
                </h3>
                <div class="d-flex col-3 justify-content-between">
                    <div>hp: {{ vs_pokemon.hp }}</div>
                    <div>attack: {{ vs_pokemon.attack }}</div>
                </div>
            </div>
            
            <div class="d-flex justify-content-center {% if winner and winner.name != vs_pokemon.name %} dead {% endif %}">
                <img src="{{ vs_pokemon.image }}" alt="{{ vs_pokemon.name }} image" height="150"/>
            </div>
    
            <div class="d-flex col-4 mt-3 justify-content-center fs-4 fw-bolder">
                <div>hp: {{ session['vs_pokemon_hp'] }}</div>
            </div>
    
            {% if not global_win %}
            <div class="mt-3 d-flex">
                <div class="d-flex mt-3 justify-content-center fs-4 border border-secondary rounded">
                    <div class="d-flex justify-content-center align-items-center p-1">
                        Number:&nbsp;
                        <span class="fw-bolder">
                            {% if session['entered_number'] %}
                                {{ session['vs_pokemon_number'] }}    
                            {% endif %}
                        </span>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
    
    {% if global_win %}
    <div class="d-flex flex-column col-6 mt-5 fs-4 border border-secondary rounded justify-content-center align-items-center">
        <div> {{ winner.name }} win! </div>
        <form class="col-6 d-flex justify-content-center p-2" action="{{ url_for('fight') }}" method="post" enctype="multipart/form-data">
            <input type="hidden" name="ok_win">
            <button class="col-8 btn btn-outline-secondary" type="submit">OK</button>
        </form>
    </div>
    {% endif %}

    {% if round_win == True or round_win == False %}
    <div class="d-flex flex-column col-6 mt-5 fs-4 border border-secondary rounded justify-content-center align-items-center">
        <div>
            {% if round_win == True %}
            {{ pokemon.name }} (you)
            {% elif round_win == False %}
            {{ vs_pokemon.name }} 
            {% endif %}
            attacks!
        </div>
        <form class="col-6 d-flex justify-content-center p-2" action="{{ url_for('fight') }}" method="post" enctype="multipart/form-data">
            <input type="hidden" name="ok">
            <button class="col-8 btn btn-outline-secondary" type="submit">OK</button>
        </form>
    </div>
    {% endif %}


</div>
{% endblock %}

